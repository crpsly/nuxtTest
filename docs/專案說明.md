# Nuxt 3 公版

## 專案概述

此專案是基於 Nuxt 3 開發的前端應用程式模板,結合了 Element Plus UI 組件庫和 Tailwind CSS 原子化框架。專案採用現代化的前端技術架構,適用於開發各類內部業務系統及客戶端網頁應用。

## 專案核心技術

- **Nuxt 3**: 基於 Vue 3 的全端框架，提供自動導入和檔案系統路由等功能
- **Element Plus**: UI 組件庫，提供豐富的預製組件
- **Tailwind CSS**: 原子化 CSS 框架，用於快速構建響應式界面
- **TypeScript**: 為 JavaScript 提供靜態類型檢查
- **Vee-Validate**: 表單驗證庫

## 專案主要功能

### 1. API 請求管理

專案封裝了完善的 API 請求處理機制：

- **Gateway 代理**: 後端 API 請求集中通過 `gateway.post.ts` 處理
- **Mock 數據**: 開發環境支援模擬數據，方便前端獨立開發
- **請求攔截**: 自動處理 Token 失效、請求頭設置等情況
- **錯誤處理**: 統一的錯誤捕獲和顯示機制
- **追蹤系統**: 支援請求追蹤 ID (traceparent)，方便問題排查

### 2. 路由與導航

- **自動路由**: 基於 Nuxt 的檔案系統自動生成路由
- **全局中間件**: 實現登入檢查、權限驗證、頁面載入等中間件
- **頁面元數據**: 支援設置 `meta` 屬性控制頁面行為，如 `withoutLogin`、`noPermission`、`keep`

### 3. 狀態管理

- **跨組件狀態共享**: 通過 `useShareData` 實現組件間的數據共享和傳遞
- **響應式狀態**: 使用 Nuxt3 useState 的響應式系統管理應用狀態
- **認證狀態**: 管理用戶認證相關狀態

### 4. 環境配置系統

- **多環境支援**: 支援開發(dev)、測試(sit)、預演(uat)和生產(prod)等多種環境
- **配置分離**: 通過 JSON 檔案管理各環境的配置
- **運行時配置**: 使用 Nuxt 的 `runtimeConfig` 實現前後端配置共享

### 5. UI 框架整合

- **響應式佈局**: 支援桌面和移動設備的響應式設計
- **元件庫整合**: 深度整合 Element Plus 元件庫
- **客製化主題**: 支援透過 SCSS 變數自定義元件主題

## 專案特殊機制

### 6. 全局中間件執行流程

專案設置了多個全局中間件，按照順序執行以保證頁面載入和權限驗證的正確性：

1. `00.check-login.global.ts`: 檢查用戶是否已登入
2. `01.loading-start.global.ts`: 啟動頁面載入效果
3. `02.read-data.global.ts`: 讀取頁面所需數據
4. `03.check-permission.global.ts`: 檢查用戶是否有當前頁面的訪問權限
5. `99.loading-end.global.ts`: 結束頁面載入效果

### 7. API 代理與模擬數據

專案透過 `gateway.post.ts` 實現 API 代理，主要功能包括：

- 開發模式自動使用模擬數據
- 支援文件上傳的 FormData 請求處理
- 追蹤 ID 生成與傳遞
- 錯誤統一處理與日誌記錄

### 8. 資料傳輸安全

專案實現了敏感資訊的安全傳輸機制：

- 使用標準加密函式庫進行資料保護
- 敏感資料在傳輸前進行處理
- 支援通過環境變數配置安全參數

### 9. 左側選單與權限控制

專案實現了基於用戶權限的動態選單系統：

- 根據用戶權限獲取選單資料
- 根據權限動態渲染左側選單
- 支援選單折疊功能，適應不同螢幕尺寸

## 專案目錄結構說明

- `app.vue`: 應用程式入口
- `composables/`: 共享邏輯 (hooks)
  - `useHttp.ts`: HTTP 請求處理
  - `useShareData.ts`: 全局狀態管理
- `components/`: 全局通用組件
- `layouts/`: 頁面佈局模板
  - `components/`: 佈局相關的組件，包含左側選單
- `middleware/`: 全局中間件
- `pages/`: 頁面組件
  - `login.vue`: 登入頁面
  - `index.vue`: 首頁
- `server/`: 伺服器端邏輯
  - `api/`: API 端點，包含 API 代理
  - `dto/`: 資料傳輸對象定義
- `types/`: TypeScript 型別定義
- `utils/`: 工具函數集

